{"ast":null,"code":"import React,{useEffect,useState,useRef}from\"react\";import{Link}from\"react-router-dom\";import{CoffeeAPIService}from\"../apiService\";import beansImage from'../assets/roast1.jpg';import Footer from'./Footer';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const[coffeeList,setCoffeeList]=useState([]);const scrollContainerRef=useRef(null);useEffect(()=>{async function fetchCoffeeList(){if(typeof caches!==\"undefined\"){try{const cache=await caches.open(\"my-cache\");const cachedData=await cache.match(\"/api/coffee\");if(cachedData){const cachedJson=await cachedData.json();setCoffeeList(cachedJson);return;}const beans=await CoffeeAPIService.fetchCoffeeBeans();setCoffeeList(beans);const response=new Response(JSON.stringify(beans));await cache.put(\"/api/coffee\",response);}catch(error){console.error(\"Caching error:\",error);// Fallback to fetch data directly if caching fails\nconst beans=await CoffeeAPIService.fetchCoffeeBeans();setCoffeeList(beans);}}else{// Fetch data directly if `caches` is unavailable\nconst beans=await CoffeeAPIService.fetchCoffeeBeans();setCoffeeList(beans);}}fetchCoffeeList();},[]);useEffect(()=>{const scrollContainer=scrollContainerRef.current;const scroll=()=>{if(scrollContainer){scrollContainer.scrollBy({left:1,behavior:'smooth'});}};const intervalId=setInterval(scroll,30);return()=>clearInterval(intervalId);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col min-h-screen\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow max-w-full mx-0 p-0\",children:[/*#__PURE__*/_jsx(\"img\",{src:beansImage,alt:\"Coffee Beans\",className:\"w-full h-auto mb-5 md:h-64 lg:h-80 object-cover\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl sm:text-3xl md:text-3xl font-medium mb-4 font-permanent-marker text-center\",children:\"Welcome to Mr.Beans\"}),/*#__PURE__*/_jsx(\"div\",{ref:scrollContainerRef,className:\"flex overflow-hidden py-2\",children:coffeeList.map(coffee=>/*#__PURE__*/_jsxs(Link,{to:`/coffee/${coffee.id}`,className:\"flex flex-col items-center text-gray-800 border border-gray-300 rounded-lg p-3 mr-4 flex-shrink-0 transition-transform transform hover:-translate-y-1 hover:shadow-lg\",children:[/*#__PURE__*/_jsx(\"img\",{src:coffee.image_url,alt:coffee.name,className:\"w-36 h-36 sm:w-44 sm:h-44 md:w-48 md:h-48 object-cover rounded-lg mb-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-medium mb-4 text-center font-permanent-marker\",children:coffee.name})]},coffee.id))})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default Home;","map":{"version":3,"names":["React","useEffect","useState","useRef","Link","CoffeeAPIService","beansImage","Footer","jsx","_jsx","jsxs","_jsxs","Home","coffeeList","setCoffeeList","scrollContainerRef","fetchCoffeeList","caches","cache","open","cachedData","match","cachedJson","json","beans","fetchCoffeeBeans","response","Response","JSON","stringify","put","error","console","scrollContainer","current","scroll","scrollBy","left","behavior","intervalId","setInterval","clearInterval","className","children","src","alt","ref","map","coffee","to","id","image_url","name"],"sources":["C:/Users/ACER/coffee-beans-app/src/component/Home.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { CoffeeAPIService } from \"../apiService\";\r\nimport beansImage from '../assets/roast1.jpg';\r\nimport Footer from './Footer';\r\n\r\nconst Home = () => {\r\n  const [coffeeList, setCoffeeList] = useState([]);\r\n  const scrollContainerRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    async function fetchCoffeeList() {\r\n      if (typeof caches !== \"undefined\") {\r\n        try {\r\n          const cache = await caches.open(\"my-cache\");\r\n          const cachedData = await cache.match(\"/api/coffee\");\r\n\r\n          if (cachedData) {\r\n            const cachedJson = await cachedData.json();\r\n            setCoffeeList(cachedJson);\r\n            return;\r\n          }\r\n          \r\n          const beans = await CoffeeAPIService.fetchCoffeeBeans();\r\n          setCoffeeList(beans);\r\n\r\n          const response = new Response(JSON.stringify(beans));\r\n          await cache.put(\"/api/coffee\", response);\r\n        } catch (error) {\r\n          console.error(\"Caching error:\", error);\r\n          // Fallback to fetch data directly if caching fails\r\n          const beans = await CoffeeAPIService.fetchCoffeeBeans();\r\n          setCoffeeList(beans);\r\n        }\r\n      } else {\r\n        // Fetch data directly if `caches` is unavailable\r\n        const beans = await CoffeeAPIService.fetchCoffeeBeans();\r\n        setCoffeeList(beans);\r\n      }\r\n    }\r\n\r\n    fetchCoffeeList();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const scrollContainer = scrollContainerRef.current;\r\n\r\n    const scroll = () => {\r\n      if (scrollContainer) {\r\n        scrollContainer.scrollBy({\r\n          left: 1,\r\n          behavior: 'smooth'\r\n        });\r\n      }\r\n    };\r\n\r\n    const intervalId = setInterval(scroll, 30);\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"flex flex-col min-h-screen\">\r\n      <div className=\"flex-grow max-w-full mx-0 p-0\">\r\n        <img \r\n          src={beansImage} \r\n          alt=\"Coffee Beans\" \r\n          className=\"w-full h-auto mb-5 md:h-64 lg:h-80 object-cover\" \r\n        />\r\n        <h1 className=\"text-2xl sm:text-3xl md:text-3xl font-medium mb-4 font-permanent-marker text-center\">\r\n          Welcome to Mr.Beans\r\n        </h1>\r\n        <div ref={scrollContainerRef} className=\"flex overflow-hidden py-2\">\r\n          {coffeeList.map((coffee) => (\r\n            <Link \r\n              key={coffee.id} \r\n              to={`/coffee/${coffee.id}`} \r\n              className=\"flex flex-col items-center text-gray-800 border border-gray-300 rounded-lg p-3 mr-4 flex-shrink-0 transition-transform transform hover:-translate-y-1 hover:shadow-lg\"\r\n            >\r\n              <img \r\n                src={coffee.image_url} \r\n                alt={coffee.name} \r\n                className=\"w-36 h-36 sm:w-44 sm:h-44 md:w-48 md:h-48 object-cover rounded-lg mb-2\" \r\n              />\r\n              <span className=\"text-xl font-medium mb-4 text-center font-permanent-marker\">{coffee.name}</span>\r\n            </Link>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}